<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="./static/js/grid.css">
    <link rel="icon" type="image/png" href="./images/wordlelogo.png">
    <meta charset="utf-8">
    <title>Wordle - La copia</title>
    <style type="text/css">
    * {
        margin: 0;
        padding: 0;
        font-family: 'Clear Sans', 'Helvetica Neue', Arial, sans-serif;
    }

    header {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        border-bottom: 1px solid black;

    }

    #title {
        font-weight: 700;
        font-size: 36px;
        letter-spacing: 0.2rem;
        text-transform: uppercase;
        text-align: center;
    }

    .letterbox {
        width: 62px;
        height: 62px;
        border: 1px solid black;
        margin-right: 5px;
        margin-bottom: 5px;
    }

    .flex {
        display: flex;
    }

    #all {
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
    }

    #midcontainer .row {
        margin-left: auto;
        margin-right: auto;
        margin-top: 9px;
        display: flex;
        justify-content: space-between;
    }

    .letterbox {
        box-sizing: border-box;
        width: 60px;
        height: 60px;
        border: 2px solid #ddd;
        font-size: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: Helvetica, sans-serif;
        text-transform: uppercase;
        font-weight: 700;
    }

    #keyboard {
        max-width: 500px;
        margin-left: auto;
        margin-right: auto;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
    }

    .button {
        background-color: #d3d6da;
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 4px;
        height: 60px;
        width: 43px;
        outline: none;
        border: none;
        padding: 0 5px;
        margin: 2.5px;
        font-weight: 700;
    }

    .button:hover {
        cursor: pointer;
    }

    #enter {
        width: 65px;
    }

    #backspace {
        width: 65px;
    }

    header div {
        flex: 1;
    }

    #lastcontainer {
        display: flex;
        justify-content: flex-end;
    }

    .hidden {
        display: none;
    }

    .selectedletter {
        border: 2px solid #000000;
    }

    .outputmessages {
        position: fixed;
        top: 10%;
        left: 50%;
        transform: translate(-50%, 0);
        text-align: center;
        background-color: black;
        padding: 10px 10px 10px 10px;
        border-radius: 10px;
        font-weight: bold;
        color: #ffffff;
        font-size: 16px;
        z-index: 1;
    }

    .yellow {
        background-color: #c9b458;
        font-weight: bold;
        color: #ffffff;
        border: none;
    }

    .green {
        background-color: #6aaa64;
        font-weight: bold;
        color: #ffffff;
        border: none;
    }

    .gray {
        background-color: #787c7e;
        font-weight: bold;
        color: #ffffff;
        border: none;
    }

    #tutorial {
        position: fixed;
        left: 50%;
        transform: translate(-50%, 0);
        background-color: #ffffff;
        padding: 10px 10px 10px 10px;
        border-radius: 10px;
        color: #000000;
        font-size: 16px;
        width: 500px;
        box-shadow: 0 4px 23px 0 rgb(0 0 0 / 20%);
    }

    #tutorialcontainer {
        padding: 20px 20px 20px 20px;
    }

    #tutorialheader {
        text-align: end;
        position: absolute;
        top: 16px;
        right: 16px;
    }

    .tutorialtexts {
        color: #000;
        margin-bottom: 14px;
    }

    #tutorialcontent {
        border-bottom: 1px solid #787c7e;
        text-align: start;
    }

    .esempi {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-start;
    }

    .lettercontainer {
        margin-right: 5px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
        font-weight: bold;
        font-size: 32px;
        box-sizing: border-box;
    }

    .exampleletters {
        border: 1px solid #787c7e;
    }

    #esempicontainer p {
        margin-top: 14px;
        margin-bottom: 14px;
    }
    .flip-horizontal-top {
	    -webkit-animation: flip-horizontal-top 1s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
        animation: flip-horizontal-top 1s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
    }
    @-webkit-keyframes flip-horizontal-top {
    0% {
        -webkit-transform: rotateX(0);
                transform: rotateX(0);
    }
    100% {
        -webkit-transform: rotateX(360deg);
                transform: rotateX(360deg);
    }
    }
    @keyframes flip-horizontal-top {
    0% {
        -webkit-transform: rotateX(0);
                transform: rotateX(0);
    }
    100% {
        -webkit-transform: rotateX(360deg);
                transform: rotateX(360deg);
    }
    }
    .shake-horizontal{
-webkit-animation: shake-horizontal 0.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
       animation: shake-horizontal 0.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
}
@-webkit-keyframes shake-horizontal {
  0%,
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70% {
    -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
  }
  20%,
  40%,
  60% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px);
  }
  80% {
    -webkit-transform: translateX(8px);
            transform: translateX(8px);
  }
  90% {
    -webkit-transform: translateX(-8px);
            transform: translateX(-8px);
  }
}
@keyframes shake-horizontal {
  0%,
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70% {
    -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
  }
  20%,
  40%,
  60% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px);
  }
  80% {
    -webkit-transform: translateX(8px);
            transform: translateX(8px);
  }
  90% {
    -webkit-transform: translateX(-8px);
            transform: translateX(-8px);
  }
}
.shake-horizontal{
-webkit-animation: shake-horizontal 0.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
       animation: shake-horizontal 0.8s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;
}
@-webkit-keyframes shake-horizontal {
  0%,
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70% {
    -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
  }
  20%,
  40%,
  60% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px);
  }
  80% {
    -webkit-transform: translateX(8px);
            transform: translateX(8px);
  }
  90% {
    -webkit-transform: translateX(-8px);
            transform: translateX(-8px);
  }
}
@keyframes shake-horizontal {
  0%,
  100% {
    -webkit-transform: translateX(0);
            transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70% {
    -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
  }
  20%,
  40%,
  60% {
    -webkit-transform: translateX(10px);
            transform: translateX(10px);
  }
  80% {
    -webkit-transform: translateX(8px);
            transform: translateX(8px);
  }
  90% {
    -webkit-transform: translateX(-8px);
            transform: translateX(-8px);
  }
}


    </style>
</head>

<body>
    <section id="all" class="container flex">
        <header>
            <div>
                <a href="#"><img src="./images/interrogativo.svg"></a>
            </div>
            <div>
                <h1 id="title">WORDLE</h1>
            </div>
            <div id="lastcontainer">
                <a href="#"><img src="./images/classifica.svg"></a>
                <a href="#"><img src="./images/settings.svg"></a>
            </div>
        </header>
        <div>
            <div id="midcontainer">
                <div id="tutorial" class="">
                    <div id="tutorialcontainer">
                        <div id="tutorialheader">
                            <div>
                               <a href="#"  id="tutorialclose"><img src="./images/cross.svg"></a>
                            </div>
                        </div>
                        <div id="tutorialcontent">
                            <p class="tutorialtexts">Indovina delle <strong>Parole</strong> di 5 lettere in 6 tentativi</p>
                            <p class="tutorialtexts">Dopo ogni tentativo, i colori delle tessere cambieranno per mostrarti quanto vicino sei andato ad indovinare la parola.</p>
                        </div>
                        <div id="esempicontainer">
                            <div class="esempi">
                                <div class="tutorialletters lettercontainer flip-horizontal-top green">
                                    <p>P</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>I</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>Z</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>Z</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>A</p>
                                </div>
                            </div>
                            <p>La lettera <strong>P</strong> è nella parola ed è nel posto giusto.</p>
                            <div class="esempi">
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>P</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>O</p>
                                </div>
                                <div class="tutorialletters lettercontainer flip-horizontal-top yellow">
                                    <p>R</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>T</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>A</p>
                                </div>
                            </div>
                            <p>La lettera <strong>R</strong> è nella parola ma è al posto sbagliato.</p>
                            <div class="esempi">
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>P</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>A</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>R</p>
                                </div>
                                <div class="tutorialletters lettercontainer flip-horizontal-top gray">
                                    <p>C</p>
                                </div>
                                <div class="tutorialletters lettercontainer exampleletters">
                                    <p>O</p>
                                </div>
                            </div>
                            <p>La lettera <strong>C</strong> non è nella parola.</p>
                        </div>
                    </div>
                </div>
                <div id="errorletter" class="hidden outputmessages">
                    <h2>Non abbastanza lettere</h2>
                </div>
                <div id="errorinexistentword" class="hidden outputmessages">
                    <h2>La parola inserita non esiste</h2>
                </div>
                <div id="haiperso" class="hidden outputmessages">
                    <h2>Hai perso!</h2>
                </div>
                <div id="winmsg" class="hidden outputmessages">
                    <h2>Congratulazioni! Hai Vinto!</h2>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
                <div class="row">
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                    <div class="letterbox">
                    </div>
                </div>
            </div>
        </div>
        <div id="keyboard">
            <button class="button" data-letter="Q">Q</button>
            <button class="button" data-letter="W">W</button>
            <button class="button" data-letter="E">E</button>
            <button class="button" data-letter="R">R</button>
            <button class="button" data-letter="T">T</button>
            <button class="button" data-letter="Y">Y</button>
            <button class="button" data-letter="U">U</button>
            <button class="button" data-letter="I">I</button>
            <button class="button" data-letter="O">O</button>
            <button class="button" data-letter="P">P</button>
            <button class="button" data-letter="A">A</button>
            <button class="button" data-letter="S">S</button>
            <button class="button" data-letter="D">D</button>
            <button class="button" data-letter="F">F</button>
            <button class="button" data-letter="G">G</button>
            <button class="button" data-letter="H">H</button>
            <button class="button" data-letter="J">J</button>
            <button class="button" data-letter="K">K</button>
            <button class="button" data-letter="L">L</button>
            <button class="button enter" id="enter" data-letter="ENTER">ENTER</button>
            <button class="button" data-letter="Z">Z</button>
            <button class="button" data-letter="X">X</button>
            <button class="button" data-letter="C">C</button>
            <button class="button" data-letter="V">V</button>
            <button class="button" data-letter="B">B</button>
            <button class="button" data-letter="N">N</button>
            <button class="button" data-letter="M">M</button>
            <button class="button delete" id="backspace" data-letter="BACKSPACE"><img src="./images/backspace.svg"></button>
        </div>
    </section>
    <section id="settingspage" class="container hidden">
        <!--Work in progress-->
    </section>
    <section id="helppage" class="container hidden">
        <!--Work in progress-->
    </section>
    <script type="text/javascript" src="https://pagecdn.io/lib/mathjs/10.4.0/math.min.js"></script>
    <script src="./static/js/italianwords.js"></script>
    <script type="text/javascript">
    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    today = new Date()
    today.getDate()
    let seed = today.getDate()
    math.config({randomSeed:seed})
    let index = 0;
    let word = [];
    let erroreletter = document.querySelector("#errorletter")
    let chosenword = vocabulary[math.floor(math.random(vocabulary.length))]
    let keyboardletters = document.querySelectorAll(".button")
    let rowindex = 0
    let currentRow = document.querySelectorAll('.row')[rowindex]
    let selectedWord = vocabulary[math.floor(math.random(vocabulary.length))]
    let tentativi = 0
    let trovata = false
    let inexword = document.querySelector("#errorinexistentword")
    let win = document.querySelector("#winmsg")
    let closetutorial = document.querySelector("#tutorialclose")
    let tutorialletters = document.querySelectorAll(".tutorialletters")



    function fillLetter(value) {
        word[index] = value.toUpperCase()


        currentRow.children[index].classList.add("selectedletter")
        currentRow.children[index].innerHTML = value
        index++
    }

    function checkWord() {
        let parolauser = ""
        if (word.length === 5) {
            for (let i = 0; i < word.length; i++) {
                parolauser = parolauser + word[i]
            }
            if (parolauser.toUpperCase() === chosenword.toUpperCase()) {
                trovata = true
                return true
            } else {
                trovata = false
                return false
            }
        }

    }




    function eraseLetter() {
        if (index > 0) {
            index--
            word.pop()
            currentRow.children[index].innerHTML = " "
            currentRow.children[index].classList.remove("selectedletter")


        }



    }

    function checkinput(event) {
        let inseribile = true
        if (event >= 65 && event <= 90 || event === 13 || event === 8) {
            return inseribile
        } else {
            inseribile = false
            return inseribile
        }
    }

    function changerow() {
        if (rowindex < 5) {
            rowindex++
            currentRow = document.querySelectorAll('.row')[rowindex]
            word = []
            index = 0
        }
    }

    function colorelettere() {
        let uguale = false
        for (let s = 0; s < word.length; s++) {
            let uguale = false
            for (let f = 0; f < word.length; f++) {
                if (word[s].toUpperCase() === chosenword[f].toUpperCase()) {
                    currentRow.children[s].classList.remove("gray")
                    currentRow.children[s].classList.add("yellow")
                    currentRow.children[s].classList.add("flip-horizontal-top")
                    for (let u = 0; u < keyboardletters.length; u++) {
                        if (word[s] === keyboardletters[u].dataset.letter) {
                            keyboardletters[u].classList.remove("gray")
                            keyboardletters[u].classList.add("yellow")
                        }
                    }
                    uguale = true
                } else if (uguale === false) {
                    currentRow.children[s].classList.add("gray")
                    currentRow.children[s].classList.remove("yellow")
                    currentRow.children[s].classList.add("flip-horizontal-top")
                    for (let u = 0; u < keyboardletters.length; u++) {
                        if (word[s] === keyboardletters[u].dataset.letter) {
                            keyboardletters[u].classList.remove("yellow")
                            keyboardletters[u].classList.add("gray")
                        }
                    }
                }
            }
        }
        for (let h = 0; h < word.length; h++) {
            if (word[h].toUpperCase() === chosenword[h].toUpperCase()) {
                currentRow.children[h].classList.remove("yellow")
                currentRow.children[h].classList.remove("gray")
                currentRow.children[h].classList.add("green")
                currentRow.children[h].classList.add("flip-horizontal-top")
                for (let u = 0; u < keyboardletters.length; u++) {
                    if (word[h] === keyboardletters[u].dataset.letter) {
                        keyboardletters[u].classList.remove("gray")
                        keyboardletters[u].classList.remove("yellow")
                        keyboardletters[u].classList.add("green")
                    }
                }
            }
        }
    }

    function existingword() {
        let userword = ""
        let flag = false
        if (word.length === 5) {
            for (let i = 0; i < word.length; i++) {
                userword += word[i]
            }

            for (let j = 0; j < vocabulary.length; j++) {
                if (userword.toUpperCase() === vocabulary[j].toUpperCase()) {
                    flag = true
                }
            }
            if (flag === false) {
                currentRow.classList.add("shake-horizontal")
                inexword.classList.remove("hidden")
                setTimeout(function() {
                    inexword.classList.add("hidden")
                    currentRow.classList.remove("shake-horizontal")
                }, 1250)
            }
        } else {
            currentRow.classList.add("shake-horizontal")
            errorletter.classList.remove("hidden")
            setTimeout(function() {
                erroreletter.classList.add("hidden")
                currentRow.classList.remove("shake-horizontal")
            }, 1250)
            flag = false
        }
        return flag
    }

    function checkwin() {
        let displayperso = document.querySelector("#haiperso")
        if (trovata) {
            win.classList.remove("hidden")
        } else if (tentativi === 5) {
            displayperso.classList.remove("hidden")
        }
    }
    document.addEventListener('keydown', function(e) {
        erroreletter.classList.add("hidden")
        if (checkinput(e.keyCode)) {
            if (e.key === 'Enter') {
                if (tentativi <= 5 && trovata === false) {
                    if (existingword()) {
                        colorelettere()
                        if (checkWord()) {
                            checkwin()
                        } else if (tentativi === 5) {
                            checkwin()
                        }
                        if (word.length === 5) {
                            tentativi++
                            changerow()
                        }
                    }
                }
            } else if (e.key === 'Backspace') {
                eraseLetter()
            } else if (index < 5 && trovata === false) {
                fillLetter(e.key)
            }
        }
    });
    for (let i = 0; i < keyboardletters.length; i++) {
        let key = keyboardletters[i]
        key.addEventListener("click", function(e) {
            let lettera = e.currentTarget.dataset.letter
            if (lettera === "BACKSPACE") {
                eraseLetter()
            } else if (lettera === "ENTER") {
                if (tentativi <= 5 && trovata === false) {
                    if (existingword()) {
                        colorelettere()
                        if (checkWord()) {
                            checkwin()
                            console.log("gioco finito GG")
                        } else if (tentativi === 5) {
                            checkwin()
                        }
                        if (word.length === 5) {
                            tentativi++
                            changerow()
                        }
                    }
                }
            } else if (index < 5 && trovata === false) {
                fillLetter(lettera)
            }
        })
    }
    closetutorial.addEventListener("click",function(e){
        e.preventDefault()
        let tutorialpage = document.querySelector("#tutorial")
        tutorialpage.classList.add("hidden")
    })
    </script>
</body>

</html>